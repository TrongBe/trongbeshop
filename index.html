<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Bán đồ xi</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    .product {
      border: 1px solid #ccc;
      padding: 15px;
      margin-bottom: 20px;
      width: 300px;
    }
    .qty {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    button { cursor: pointer; }
  </style>
</head>
<body>

<h2>Sản phẩm</h2>

<!-- SẢN PHẨM 1 -->
<div class="product" data-name="Áo khoác nữ" data-price="200000" data-sale="20">
  <h3>Áo khoác nữ</h3>
  <p>Giá gốc: 200.000đ</p>
  <p>Giảm: 20%</p>

  <div class="qty">
    <button onclick="changeQty(this, -1)">-</button>
    <span class="quantity">1</span>
    <button onclick="changeQty(this, 1)">+</button>
  </div>

  <p>Tổng: <b class="total"></b></p>
  <button onclick="buy(this)">Mua ngay</button>
</div>

<!-- SẢN PHẨM 2 -->
<div class="product" data-name="Váy nữ" data-price="180000" data-sale="10">
  <h3>Váy nữ</h3>
  <p>Giá gốc: 180.000đ</p>
  <p>Giảm: 10%</p>

  <div class="qty">
    <button onclick="changeQty(this, -1)">-</button>
    <span class="quantity">1</span>
    <button onclick="changeQty(this, 1)">+</button>
  </div>

  <p>Tổng: <b class="total"></b></p>
  <button onclick="buy(this)">Mua ngay</button>
</div>

<script>
function updateTotal(product) {
  const price = Number(product.dataset.price);
  const sale = Number(product.dataset.sale);
  const qty = Number(product.querySelector('.quantity').innerText);

  const finalPrice = price * (100 - sale) / 100;
  const total = finalPrice * qty;

  product.querySelector('.total').innerText =
    total.toLocaleString('vi-VN') + 'đ';
}

function changeQty(btn, delta) {
  const product = btn.closest('.product');
  const qtyEl = product.querySelector('.quantity');
  let qty = Number(qtyEl.innerText) + delta;
  if (qty < 1) qty = 1;
  qtyEl.innerText = qty;
  updateTotal(product);
}

function buy(btn) {
  const product = btn.closest('.product');

  const name = product.dataset.name;
  const price = product.dataset.price;
  const sale = product.dataset.sale;
  const qty = product.querySelector('.quantity').innerText;

  const finalPrice = price * (100 - sale) / 100;
  const total = finalPrice * qty;

  const url = `order.html?name=${encodeURIComponent(name)}&qty=${qty}&total=${total}`;
  window.location.href = url;
}

document.querySelectorAll('.product').forEach(updateTotal);
</script>

</body>
</html>
